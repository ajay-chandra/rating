#spring.application.name=PRM_RATING_FILE_PROCESSER
spring.main.allow-circular-references=true
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

#spring.jpa.hibernate.ddl-auto=none

spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false 
spring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect
spring.datasource.url=jdbc:mysql://10.0.13.93:3306/PRM_RATING_WAKANDA
spring.datasource.username=admin
spring.datasource.password=@tW1Un5e6(@$#a7
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
 
#spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false 
#spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.OracleDialect
#spring.datasource.url=jdbc:oracle:thin:@//10.0.10.105:1521/ORACLEPDB
#spring.datasource.username=prmuser
#spring.datasource.password=prmuser
#spring.datasource.driver-class-name=oracle.jdbc.OracleDriver

logging.level.org.springframework=INFO
logging.level.org.hibernate.SQL=DEBUG
spring.jpa.properties.hibernate.generate_statistics=true


#DB_TYPE=Oracle
DB_TYPE=mysql
INSTANCE_ID=1


ORACLE_RERATE_TRIGGER=SELECT PRT.SR_NO as SR_NO,PRT.PROCESS_NAME as PROCESS_NAME,PRT.PROCESS_PARAMETERS.RequestParams.ContractType as contractType ,PRT.PROCESS_PARAMETERS.RequestParams.OperatorId as operatorId,PRT.PROCESS_PARAMETERS.RequestParams.TraffiDirection as TRAFFIC_TYPE ,PRT.PROCESS_PARAMETERS.RequestParams.CallDateFrom as RATE_FROM ,PRT.PROCESS_PARAMETERS.RequestParams.CallDateTill as RATE_TILL,PRT.PROCESS_PARAMETERS.RequestParams.Service as SERVICE_ID ,PRT.PROCESS_PARAMETERS.RequestParams.TransactionType as TransactionType,PRT.PROCESS_PARAMETERS.RequestParams.RatePlan as RatePlan,PRT.PROCESS_PARAMETERS.RequestParams.InTrunk as InTrunk,PRT.PROCESS_PARAMETERS.RequestParams.OutTrunk as OutTrunk,PRT.PROCESS_PARAMETERS.RequestParams.Hni as Hni,PRT.PROCESS_PARAMETERS.RequestParams.TimeCode as TimeCode,PRT.PROCESS_PARAMETERS.RequestParams.NetworkElement as NetworkElement,PRT.PROCESS_PARAMETERS.RequestParams.A_Number as aParty,PRT.PROCESS_PARAMETERS.RequestParams.B_Number as bParty ,PRT.PROCESS_PARAMETERS.RequestParams.C_Number as cParty,PRT.PROCESS_PARAMETERS.RequestParams.RejectCode as REJECT_CODE,PRT.PROCESS_PARAMETERS.RequestParams.Origin.ZoneType as OrigZoneType,PRT.PROCESS_PARAMETERS.RequestParams.Origin.Zone as OrigZone,PRT.PROCESS_PARAMETERS.RequestParams.Termination.ZoneType as DestZoneType,PRT.PROCESS_PARAMETERS.RequestParams.Termination.Zone as DestZone,PRT.PROCESS_PARAMETERS.RequestParams.FileId as FileId, PRT.PROCESS_PARAMETERS.RequestParams.RapFileSeqNumber as RapFileSeq, PRT.PROCESS_PARAMETERS.RequestParams.fileSeqNo as tapSeqNo,PRT.PROCESS_PARAMETERS.RequestParams.tapFileType as tapFileType,PRT.PROCESS_PARAMETERS.RequestParams.errorCdrseqNo as errorCdrseqNo from PRM_RERATING_TRIGGER PRT where PRT.RATING_STATUS='N'
MYSQL_RERATE_TRIGGER=SELECT SR_NO as SR_NO,PROCESS_NAME as PROCESS_NAME,json_extract(PROCESS_PARAMETERS, '$.RequestParams.ContractType') as contractType,json_extract(PROCESS_PARAMETERS, '$.RequestParams.OperatorId') as operatorId,json_extract(PROCESS_PARAMETERS, '$.RequestParams.TraffiDirection') as TRAFFIC_TYPE,json_extract(PROCESS_PARAMETERS, '$.RequestParams.CallDateFrom') as RATE_FROM,json_extract(PROCESS_PARAMETERS, '$.RequestParams.CallDateTill') as RATE_TILL,json_extract(PROCESS_PARAMETERS, '$.RequestParams.Service') as SERVICE_ID,json_extract(PROCESS_PARAMETERS, '$.RequestParams.TransactionType') as TransactionType,json_extract(PROCESS_PARAMETERS, '$.RequestParams.RatePlan') as RatePlan,json_extract(PROCESS_PARAMETERS, '$.RequestParams.InTrunk') as InTrunk,json_extract(PROCESS_PARAMETERS, '$.RequestParams.OutTrunk') as OutTrunk,json_extract(PROCESS_PARAMETERS, '$.RequestParams.Hni') as Hni,json_extract(PROCESS_PARAMETERS, '$.RequestParams.TimeCode') as TimeCode,json_extract(PROCESS_PARAMETERS, '$.RequestParams.NetworkElement') as NetworkElement,json_extract(PROCESS_PARAMETERS, '$.RequestParams.A_Number') as aParty,json_extract(PROCESS_PARAMETERS, '$.RequestParams.C_Number') as cParty,json_extract(PROCESS_PARAMETERS, '$.RequestParams.RejectCode') as RejectCode,json_extract(PROCESS_PARAMETERS, '$.RequestParams.Origin.ZoneType') as OrigZoneType,json_extract(PROCESS_PARAMETERS, '$.RequestParams.Origin.Zone') as OrigZone,json_extract(PROCESS_PARAMETERS, '$.RequestParams.Termination.ZoneType') as DestZoneType,json_extract(PROCESS_PARAMETERS, '$.RequestParams.Termination.Zone') as DestZone, json_extract(PROCESS_PARAMETERS, '$.RequestParams.RapFileSeqNumber') as RapFileSeq,json_extract(PROCESS_PARAMETERS, '$.RequestParams.fileSeqNo') as tapSeqNo,json_extract(PROCESS_PARAMETERS, '$.RequestParams.tapFileType') as tapFileType,json_extract(PROCESS_PARAMETERS, '$.RequestParams.errorCdrseqNo') as errorCdrseqNo  from PRM_RERATING_TRIGGER where RATING_STATUS='N'


SQL_LOADER_COMMAND=sqlldr prmuser/prmuser@10.0.10.105:1521/ORACLEPDB control={0} log={1} direct=false silent=header skip_unusable_indexes=true rows=200000 bindsize=20000000 readsize=20000000 ERRORS=25000


RATED_LODER=load data infile "{0}" APPEND into table {1} fields terminated by '','' optionally enclosed by ''"'' TRAILING NULLCOLS (M_DAY,CONTRACT_TYPE,NETWORK_ELEMENT_ID,CDR_TYPE,SERVICE_ID,IN_TRUNK,OUT_TRUNK,HNI,A_NUMBER,B_NUMBER,C_NUMBER,SGSN_ADDR,PDP_ADDR,APN_ADDR,OPERATOR_ID,POI_ID,CALL_DATE TIMESTAMP "yyyy-mm-dd HH24:MI:SS",CALL_DURATION,TRAFFIC_TYPE,INC_GPRS_VOLUME,OUT_GPRS_VOLUME,TELESERVICE_CODE,BEARERSERVICE_CODE,CDR_PARTIAL_INDICATOR,CDR_PARTIAL_SEQ_NUM,CHARGING_ID,SUBSCRIBER_TYPE,RATE_BASED_ON,CALL_ORIGIN_ZONE,CALL_TERMINATION_ZONE,ORIGIN_ZONE_TYPE,TERMINATION_ZONE_TYPE,DIAL_PLAN_ID,DAY_CODE,TIME_CODE,RATE_PLAN_ID,TRANSACTION_TYPE,TARIFF_ID,CHARGEABLE_UNITS,CHARGED_UNITS,AMOUNT_CHARGED,RATE_VALUE,TAX_AMOUNT,UNIT_TYPE,CAMEL_INDICATOR,CAMEL_SERVICE_LEVEL,CAMEL_SERVICE_KEY,CAMEL_DEFAULT_CALL_HANDLING,CAMEL_SERVER_ADDR,CAMEL_MSC_ADDR,CAMEL_CALL_REF_NUMBER,CAMEL_INIT_CF_INDICATOR,CAMEL_DESTINATION_NUMBER,CAMEL_MODIFICATION,SUPPLIMENTARY_NUMBER,NETWORK_TIME,REASON_FOR_CLEARDOWN,IMEI_NUMBER,MNP_IDENTIFIER,CDR_CHRONO_NUMBER,NETWORK_CALL_REF_NUMBER,CDR_FILE_ID,CDR_RATED_DATE TIMESTAMP "yyyy-mm-dd HH24:MI:SS",OPERATOR_IDENTIFIED_BY,CELL_ID,DATA_TYPE_INDICATOR,TARIFF_TYPE,SERVICE_TYPE,SUPPLIMENTARY_ACTION_CODE,DIALLED_DIGITS,DERIVED_SERVICE_CODE,CURRENCY_CODE,P_CSCF_ADDRESS,A_USER_ID,B_USER_ID,EVENT_REFERENCE,API_OPERATOR_ID,QCI,MAXIMUM_BIT_RATE,GUARANTEED_BIT_RATE,ALLOCATION_RETENTION_PRIORITY,TAX_PERCENTAGE,CDR_UNIQUE_ID,TAP_SDR_CHARGE,DISCOUNT_AMOUNT,TAP_SDR_DISCOUNT,TAX_SDR,DISCOUNTABLE_AMOUNT,DISCOUNTABLE_AMOUNT_SDR,NE_TYPES,ZONE_SUB_TYPE,CHARGED_ITEM,CHARGE_TYPE,TAP_EXCHANGE_RATE_CODE,HOME_EXCHANGE_RATE_CODE,TAP_RECORDING_ENTITY_CODE,CDR_PROCESSED_DATE,TOTAL_MINUTES,RATE_MULTIPLICATION_FACTOR,EXCHANGE_RATE,ANSWER_TIME,DISCONNECT_TIME,RELEASE_TIME,DURATION_1,DURATION_2,DURATION_3,END_OPERATOR,TAP_EXCHANGE_RATE,ORIGIN_ZONE_SUB_TYPE,RECORDING_ENTITY_TYPE_SGSN,TAP_RECORDING_ENTITY_CODE_SGSN,TAP_TAX_RATE,ORIGIN_COUNTRY_CODE,TERMINATION_COUNTRY_CODE,INTERCONNECT_FEE)

REJECTED_LOADER=load data infile "{0}" APPEND into table {1} fields terminated by '','' optionally enclosed by ''"'' TRAILING NULLCOLS  (M_DAY,CONTRACT_TYPE,OPERATOR_ID,REJECT_CODE,REJECT_DESCRIPTION,CDR_POSISTION,REJECT_VALUE,REJECTED_CDR CHAR(2000),REJECTED_ON TIMESTAMP "yyyy-mm-dd HH24:MI:SS",CDR_STATUS,CDR_RERATE_SEQ_NUMBER,CDR_TYPE,NETWORK_ELEMENT_ID,TRAFFIC_TYPE,OPERATOR_IDENTIFIED_BY,POI_ID,SERVICE_ID,CALL_DATE TIMESTAMP "yyyy-mm-dd HH24:MI:SS",CALL_DURATION,A_NUMBER,B_NUMBER,C_NUMBER,CALL_ORIGIN_ZONE,CALL_TERMINATION_ZONE,DIAL_PLAN_ID,RATE_PLAN_ID,RATE_BASED_ON,TRANSACTION_TYPE,DAY_CODE,TIME_CODE,CHARGING_ID,CDR_CHRONO_NUMBER,CDR_PARTIAL_SEQ_NUM,CDR_FILE_ID,CDR_UNIQUE_ID,DURATION_1,DURATION_2,DURATION_3)

FILTERED_LOADER=load data infile "{0}" APPEND into table {1} fields terminated by '','' optionally enclosed by ''"'' TRAILING NULLCOLS  (CONTRACT_TYPE,OPERATOR_ID,REJECT_CODE,REJECT_DESCRIPTION,CDR_POSISTION,FILTERED_CDR CHAR(2000),FILTERED_ON TIMESTAMP "yyyy-mm-dd HH24:MI:SS",CDR_STATUS,CDR_TYPE,NETWORK_ELEMENT_ID,TRAFFIC_TYPE,OPERATOR_IDENTIFIED_BY,POI_ID,SERVICE_ID,CALL_DATE TIMESTAMP "yyyy-mm-dd HH24:MI:SS",CALL_DURATION,A_NUMBER,B_NUMBER,C_NUMBER,CALL_ORIGIN_ZONE,CALL_TERMINATION_ZONE,DIAL_PLAN_ID,RATE_PLAN_ID,RATE_BASED_ON,TRANSACTION_TYPE,DAY_CODE,TIME_CODE,CHARGING_ID,CDR_CHRONO_NUMBER,CDR_PARTIAL_SEQ_NUM,CDR_FILE_ID,CDR_UNIQUE_ID)

REJECTED_DUMPER=RejectedDumper.ctl

FILTERED_DUMPER=FileteredDumper.ctl

CONTROL_FILE_PATH=/opt/CONTROL_FILE_PATH/SQLLoader/

DB_LOG_PATH=/opt/DB_LOG_PATH/SQLLog/





TRA_CONTROL_FILE_PATH=/DATA/Apps/VC_TNZ_PRM/PRM_FILES/PRM_RATING_ENGINE/TRA_CONTROL_FILE_PATH/SQLLoader/
TRA_DB_LOG_PATH=/DATA/Logs/PRM/RatingEngineLog/TRA_DB_LOG_PATH/SQLLog/

TRA_LOADER=load data infile "{0}" APPEND into table {1} fields terminated by '','' optionally enclosed by ''"'' TRAILING NULLCOLS (M_DAY,CONTRACT_TYPE,NETWORK_ELEMENT_ID,CDR_TYPE,SERVICE_ID,IN_TRUNK,OUT_TRUNK,HNI,A_NUMBER,B_NUMBER,C_NUMBER,SGSN_ADDR,PDP_ADDR,APN_ADDR,OPERATOR_ID,POI_ID,CALL_DATE TIMESTAMP "yyyy-mm-dd HH24:MI:SS",CALL_DURATION,TRAFFIC_TYPE,INC_GPRS_VOLUME,OUT_GPRS_VOLUME,TELESERVICE_CODE,BEARERSERVICE_CODE,CDR_PARTIAL_INDICATOR,CDR_PARTIAL_SEQ_NUM,CHARGING_ID,SUBSCRIBER_TYPE,RATE_BASED_ON,CALL_ORIGIN_ZONE,CALL_TERMINATION_ZONE,ORIGIN_ZONE_TYPE,TERMINATION_ZONE_TYPE,DIAL_PLAN_ID,DAY_CODE,TIME_CODE,RATE_PLAN_ID,TRANSACTION_TYPE,TARIFF_ID,CHARGEABLE_UNITS,CHARGED_UNITS,AMOUNT_CHARGED,RATE_VALUE,TAX_AMOUNT,UNIT_TYPE,CAMEL_INDICATOR,CAMEL_SERVICE_LEVEL,CAMEL_SERVICE_KEY,CAMEL_DEFAULT_CALL_HANDLING,CAMEL_SERVER_ADDR,CAMEL_MSC_ADDR,CAMEL_CALL_REF_NUMBER,CAMEL_INIT_CF_INDICATOR,CAMEL_DESTINATION_NUMBER,CAMEL_MODIFICATION,SUPPLIMENTARY_NUMBER,NETWORK_TIME,REASON_FOR_CLEARDOWN,IMEI_NUMBER,MNP_IDENTIFIER,CDR_CHRONO_NUMBER,NETWORK_CALL_REF_NUMBER,CDR_FILE_ID,CDR_RATED_DATE TIMESTAMP "yyyy-mm-dd HH24:MI:SS",OPERATOR_IDENTIFIED_BY,CELL_ID,DATA_TYPE_INDICATOR,TARIFF_TYPE,SERVICE_TYPE,SUPPLIMENTARY_ACTION_CODE,DIALLED_DIGITS,DERIVED_SERVICE_CODE,CURRENCY_CODE,P_CSCF_ADDRESS,A_USER_ID,B_USER_ID,EVENT_REFERENCE,API_OPERATOR_ID,QCI,MAXIMUM_BIT_RATE,GUARANTEED_BIT_RATE,ALLOCATION_RETENTION_PRIORITY,TAX_PERCENTAGE,CDR_UNIQUE_ID,TAP_SDR_CHARGE,DISCOUNT_AMOUNT,TAP_SDR_DISCOUNT,TAX_SDR,DISCOUNTABLE_AMOUNT,DISCOUNTABLE_AMOUNT_SDR,NE_TYPES,ZONE_SUB_TYPE,CHARGED_ITEM,CHARGE_TYPE,TAP_EXCHANGE_RATE_CODE,HOME_EXCHANGE_RATE_CODE,TAP_RECORDING_ENTITY_CODE,CDR_PROCESSED_DATE,TOTAL_MINUTES,RATE_MULTIPLICATION_FACTOR,EXCHANGE_RATE,ANSWER_TIME,DISCONNECT_TIME,RELEASE_TIME,DURATION_1,DURATION_2,DURATION_3,END_OPERATOR,TAP_EXCHANGE_RATE,ORIGIN_ZONE_SUB_TYPE,RECORDING_ENTITY_TYPE_SGSN,TAP_RECORDING_ENTITY_CODE_SGSN,TAP_TAX_RATE,ORIGIN_COUNTRY_CODE,TERMINATION_COUNTRY_CODE,INTERCONNECT_FEE,RATED_FILE_NAME CONSTANT "{2}")



